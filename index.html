<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentasi API Lengkap - TheBaxLancer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a101f;
            color: #e0e0e0;
        }
        pre, code {
            font-family: 'JetBrains Mono', monospace;
        }
        .main-gradient {
            background: linear-gradient(180deg, #1a101f 0%, #110c18 100%);
        }
        .sidebar-gradient {
            background: #110c18;
        }
        .method-post { background-color: #34d399; color: #064e3b; }
        .method-get { background-color: #60a5fa; color: #1e3a8a; }
        .method-put { background-color: #fbbf24; color: #78350f; }
        .method-delete { background-color: #f87171; color: #7f1d1d; }
        .endpoint-card {
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            scroll-margin-top: 90px;
        }
        .token-required::after {
            content: 'AUTH';
            background-color: #db2777;
            color: white;
            padding: 0.15rem 0.5rem;
            font-size: 0.7rem;
            border-radius: 9999px;
            margin-left: 0.75rem;
            font-weight: 600;
        }
    </style>
</head>
<body class="antialiased">

    <div class="flex min-h-screen">
        <aside class="w-72 sidebar-gradient border-r border-gray-800 p-6 fixed h-full hidden lg:block overflow-y-auto">
            <h1 class="text-xl font-bold text-white">TheBaxLancer API</h1>
            <p class="text-sm text-gray-400 mt-1">Dokumentasi v1.4</p>
            <nav class="mt-8">
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Mulai</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#introduction" class="text-gray-400 hover:text-white">Pendahuluan</a></li>
                </ul>

                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Otentikasi</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#auth-register" class="text-gray-400 hover:text-white">Registrasi User</a></li>
                    <li><a href="#auth-login" class="text-gray-400 hover:text-white">Login User</a></li>
                    <li><a href="#auth-check-token" class="text-gray-400 hover:text-white">Check Token</a></li>
                </ul>
                
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">User</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#user-me" class="text-gray-400 hover:text-white">Get Profil & Laporan</a></li>
                    <li><a href="#user-update-profile" class="text-gray-400 hover:text-white">Update Profil</a></li>
                    <li><a href="#user-update-picture" class="text-gray-400 hover:text-white">Update Foto Profil</a></li>
                    <li><a href="#user-get-submissions" class="text-gray-400 hover:text-white">Get Laporan Submission</a></li>
                    <li><a href="#user-get-downline" class="text-gray-400 hover:text-white">Get Downline</a></li>
                </ul>
                
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Proyek</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#projects-get" class="text-gray-400 hover:text-white">Get Semua Proyek</a></li>
                    <li><a href="#projects-submit" class="text-gray-400 hover:text-white">Submit Pekerjaan</a></li>
                </ul>
                
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Admin & Super Admin</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#admin-users-get" class="text-gray-400 hover:text-white">Get Semua User</a></li>
                    <li><a href="#admin-users-edit" class="text-gray-400 hover:text-white">Edit User</a></li>
                    <li><a href="#admin-projects-create" class="text-gray-400 hover:text-white">Buat Proyek Baru</a></li>
                    <li><a href="#admin-submissions-get" class="text-gray-400 hover:text-white">Get Submission by User</a></li>
                    <li><a href="#admin-submissions-approve" class="text-gray-400 hover:text-white">Approve Submission</a></li>
                </ul>
            </nav>
        </aside>

        <main id="api-content" class="flex-1 lg:ml-72 main-gradient">
            <div class="p-6 md:p-10">

                <div class="flex justify-between items-center mb-10 sticky top-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm py-4 z-10 -mx-6 md:-mx-10 px-6 md:px-10">
                    <h1 class="text-3xl font-bold text-white">Dokumentasi API Lengkap</h1>
                    <button id="download-btn" class="bg-pink-600 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-colors">
                        Download PDF
                    </button>
                </div>

                <section id="introduction" class="mb-16">
                    <h2 class="text-2xl font-semibold border-b border-gray-700 pb-2 text-white">Pendahuluan</h2>
                    <div class="mt-4 space-y-4 text-gray-300">
                        <p>Selamat datang di dokumentasi API TheBaxLancer. API ini memungkinkan Anda untuk berinteraksi dengan layanan kami secara terprogram. API ini dirancang dengan prinsip REST.</p>
                        <p>Base URL untuk semua endpoint adalah: <code class="bg-gray-800 p-1 rounded-md text-sm text-pink-400">/api</code></p>
                        <p>Semua request dan response body menggunakan format JSON, kecuali untuk endpoint yang mengunggah file. Endpoint yang memerlukan otentikasi harus menyertakan <code class="bg-gray-800 p-1 rounded-md text-sm text-pink-400">Authorization</code> header dengan format <code class="bg-gray-800 p-1 rounded-md text-sm text-pink-400">Bearer {TOKEN}</code>.</p>
                    </div>
                </section>

                <div class="space-y-12">
                    
                    <div>
                        <h3 id="auth-register" class="text-xl font-semibold mb-6 text-white border-l-4 border-emerald-500 pl-4">Otentikasi</h3>
                        <div class="endpoint-card">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-full">POST</span>
                                <code class="text-md font-semibold text-gray-200">/auth/register</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mendaftarkan user baru.</p>
                            <h4 class="font-semibold pt-4 text-gray-300">Request Body (application/json):</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm mt-2"><code>{
    "nama": "Rino",
    "email": "rino@example.com",
    "password": "password123",
    "nomorTelepon": "081234567890",   <span class="text-gray-500">// Opsional</span>
    "bankName": "BCA",                 <span class="text-gray-500">// Opsional</span>
    "noRekening": "1234567890",         <span class="text-gray-500">// Opsional</span>
    "kodeReferralUpline": "SAN123BUDXYZ" <span class="text-gray-500">// Opsional</span>
}</code></pre>
                        </div>
                        <div id="auth-login" class="endpoint-card">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-full">POST</span>
                                <code class="text-md font-semibold text-gray-200">/auth/login</code>
                            </div>
                            <p class="text-gray-400 mt-2">Login untuk mendapatkan token JWT.</p>
                             <h4 class="font-semibold pt-4 text-gray-300">Success Response (200 OK):</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm mt-2"><code>{
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</code></pre>
                        </div>
                        <div id="auth-check-token" class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-full">GET</span>
                                <code class="text-md font-semibold text-gray-200">/auth/check-token</code>
                            </div>
                            <p class="text-gray-400 mt-2">Memverifikasi token yang ada. Jika valid, akan mengembalikan data pengguna.</p>
                             <h4 class="font-semibold pt-4 text-gray-300">Success Response (200 OK):</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm mt-2"><code>{
    "success": true,
    "message": "Token is valid.",
    "user": {
        "id": 1,
        "nama": "Rino",
        "email": "rino@example.com",
        "role": "ADMIN",
        // ... data pengguna lainnya tanpa password
    }
}</code></pre>
                        </div>
                    </div>

                    <div>
                        <h3 id="user-me" class="text-xl font-semibold mb-6 text-white border-l-4 border-blue-500 pl-4">User</h3>
                        <div class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-full">GET</span>
                                <code class="text-md font-semibold text-gray-200">/users/me</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mendapatkan detail profil, riwayat transaksi, dan paginasi untuk downline & submission.</p>
                        </div>
                        <div id="user-update-profile" class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-full">PUT</span>
                                <code class="text-md font-semibold text-gray-200">/users/me</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mengupdate data profil (nama, password, dll). Email, rekening, dan foto KTP tidak bisa diubah.</p>
                        </div>
                        <div id="user-update-picture" class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-full">PUT</span>
                                <code class="text-md font-semibold text-gray-200">/users/me/picture</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mengganti foto profil.</p>
                            <h4 class="font-semibold pt-4 text-gray-300">Request Body (multipart/form-data):</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm mt-2"><code>Key: picture
Value: [File: profile.jpg]</code></pre>
                        </div>
                         <div id="user-get-submissions" class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-full">GET</span>
                                <code class="text-md font-semibold text-gray-200">/users/me/submissions</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mendapatkan laporan submission milik pengguna yang login, dengan paginasi.</p>
                        </div>
                        <div id="user-get-downline" class="endpoint-card">
                            <div class="flex items-center gap-3 token-required">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-full">GET</span>
                                <code class="text-md font-semibold text-gray-200">/users/downline/{id}</code>
                            </div>
                            <p class="text-gray-400 mt-2">Mendapatkan daftar downline dari user dengan ID tertentu.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.getElementById('download-btn').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = 'Mempersiapkan PDF...';

            btn.style.visibility = 'hidden';

            const content = document.getElementById('api-content');
            
            html2canvas(content, {
                scale: 2,
                useCORS: true,
                backgroundColor: '#1a101f',
                onclone: (document) => {
                    document.body.style.background = '#1a101f';
                }
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                
                const pdf = new jsPDF({
                    orientation: 'p',
                    unit: 'px',
                    format: [canvas.width, canvas.height]
                });

                pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
                pdf.save('thebaxlancer_api_docs.pdf');

                btn.style.visibility = 'visible';
                btn.disabled = false;
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error("Gagal membuat PDF:", err);
                alert("Gagal membuat PDF. Silakan coba lagi.");
                btn.style.visibility = 'visible';
                btn.disabled = false;
                btn.innerHTML = originalText;
            });
        });
    </script>

</body>
</html>
