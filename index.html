<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentasi API - TheBaxLancer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        pre, code {
            font-family: 'Source Code Pro', monospace;
        }
        .method-post { background-color: #49cc90; color: white; }
        .method-get { background-color: #61affe; color: white; }
        .method-put { background-color: #fca130; color: white; }
        .method-delete { background-color: #f93e3e; color: white; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 p-6 fixed h-full hidden lg:block">
            <h1 class="text-xl font-bold text-gray-900">TheBaxLancer API</h1>
            <p class="text-sm text-gray-500 mt-1">Dokumentasi v1.0</p>
            <nav class="mt-8">
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Mulai</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#introduction" class="text-gray-600 hover:text-gray-900">Pendahuluan</a></li>
                </ul>

                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Otentikasi</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#auth-register" class="text-gray-600 hover:text-gray-900">Registrasi User</a></li>
                    <li><a href="#auth-login" class="text-gray-600 hover:text-gray-900">Login User</a></li>
                </ul>
                
                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">User</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#user-me" class="text-gray-600 hover:text-gray-900">Get Profil Saya</a></li>
                    <li><a href="#user-picture" class="text-gray-600 hover:text-gray-900">Update Foto Profil</a></li>
                </ul>

                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Proyek & Submission</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#projects-get" class="text-gray-600 hover:text-gray-900">Get Semua Proyek</a></li>
                    <li><a href="#projects-submit" class="text-gray-600 hover:text-gray-900">Submit Pekerjaan</a></li>
                </ul>

                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Admin</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#admin-projects-create" class="text-gray-600 hover:text-gray-900">Buat Proyek Baru</a></li>
                    <li><a href="#admin-users-approve" class="text-gray-600 hover:text-gray-900">Approve Registrasi</a></li>
                    <li><a href="#admin-submissions-approve" class="text-gray-600 hover:text-gray-900">Approve Submission</a></li>
                    <li><a href="#admin-submissions-reject" class="text-gray-600 hover:text-gray-900">Reject Submission</a></li>
                </ul>

                <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8">Super Admin</h2>
                <ul class="mt-3 space-y-2">
                    <li><a href="#superadmin-withdrawals-approve" class="text-gray-600 hover:text-gray-900">Approve Withdrawal</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main id="api-content" class="flex-1 lg:ml-64">
            <div class="p-6 md:p-10">

                <!-- Header with Download Button -->
                <div class="flex justify-between items-center mb-10">
                    <h1 class="text-3xl font-bold text-gray-900">Dokumentasi API</h1>
                    <button id="download-btn" class="bg-blue-600 text-white font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        Download PDF
                    </button>
                </div>

                <!-- Introduction Section -->
                <section id="introduction" class="mb-16">
                    <h2 class="text-2xl font-semibold border-b border-gray-200 pb-2">Pendahuluan</h2>
                    <div class="mt-4 space-y-4 text-gray-600">
                        <p>Selamat datang di dokumentasi API TheBaxLancer. API ini memungkinkan Anda untuk berinteraksi dengan layanan kami secara terprogram. API ini dirancang dengan prinsip REST.</p>
                        <p>Base URL untuk semua endpoint adalah: <code class="bg-gray-100 p-1 rounded-md text-sm">/api</code></p>
                        <p>Semua request dan response body menggunakan format JSON. Endpoint yang memerlukan otentikasi harus menyertakan <code class="bg-gray-100 p-1 rounded-md text-sm">Authorization</code> header dengan format <code class="bg-gray-100 p-1 rounded-md text-sm">Bearer {TOKEN}</code>.</p>
                    </div>
                </section>

                <!-- Endpoint Sections -->
                <div class="space-y-12">
                    
                    <!-- Otentikasi -->
                    <div>
                        <h3 class="text-xl font-semibold mb-6">Otentikasi</h3>
                        <div id="auth-register" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-md">POST</span>
                                <code class="text-md font-semibold text-gray-800">/auth/register</code>
                            </div>
                            <p class="text-gray-600">Mendaftarkan user baru.</p>
                            <h4 class="font-semibold pt-2">Request Body:</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm"><code>{
    "nama": "Budi Santoso",
    "email": "budi.santoso@example.com",
    "password": "password123",
    "tglLahir": "1995-12-25", // Opsional
    "nomorTelepon": "081234567890", // Opsional
    "kecamatan": "Cibinong", // Opsional
    "domisili": "Bogor", // Opsional
    "fotoKtp": "http://link.to/fotoktp.jpg", // Opsional
    "kodeReferralUpline": "SAN123BUDXYZ" // Opsional
}</code></pre>
                        </div>
                        <div id="auth-login" class="space-y-2 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-md">POST</span>
                                <code class="text-md font-semibold text-gray-800">/auth/login</code>
                            </div>
                            <p class="text-gray-600">Login untuk mendapatkan token JWT.</p>
                            <h4 class="font-semibold pt-2">Request Body:</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm"><code>{
    "email": "budi.santoso@example.com",
    "password": "password123"
}</code></pre>
                             <h4 class="font-semibold pt-2">Success Response (200 OK):</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm"><code>{
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</code></pre>
                        </div>
                    </div>

                    <!-- User -->
                    <div>
                        <h3 class="text-xl font-semibold mb-6">User</h3>
                        <div id="user-me" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-md">GET</span>
                                <code class="text-md font-semibold text-gray-800">/users/me</code>
                            </div>
                            <p class="text-gray-600">Mendapatkan detail profil user yang sedang login. Memerlukan otentikasi.</p>
                        </div>
                        <div id="user-picture" class="space-y-2 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-md">PUT</span>
                                <code class="text-md font-semibold text-gray-800">/users/me/picture</code>
                            </div>
                            <p class="text-gray-600">Mengupdate foto profil. Memerlukan otentikasi.</p>
                            <h4 class="font-semibold pt-2">Request Body (form-data):</h4>
                            <p class="text-gray-600 text-sm">Kirim file gambar dengan key <code class="bg-gray-100 p-1 rounded-md text-sm">picture</code>.</p>
                        </div>
                    </div>

                    <!-- Proyek & Submission -->
                     <div>
                        <h3 class="text-xl font-semibold mb-6">Proyek & Submission</h3>
                        <div id="projects-get" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-get font-bold text-sm px-2.5 py-1 rounded-md">GET</span>
                                <code class="text-md font-semibold text-gray-800">/projects</code>
                            </div>
                            <p class="text-gray-600">Mendapatkan daftar semua proyek yang tersedia. Memerlukan otentikasi.</p>
                        </div>
                        <div id="projects-submit" class="space-y-2 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-md">POST</span>
                                <code class="text-md font-semibold text-gray-800">/projects/{projectId}/submit</code>
                            </div>
                            <p class="text-gray-600">Mengirimkan hasil pekerjaan untuk sebuah proyek. Memerlukan otentikasi.</p>
                            <h4 class="font-semibold pt-2">Request Body (form-data):</h4>
                            <p class="text-gray-600 text-sm">Kirim data sesuai dengan field yang diminta oleh proyek. Key dari setiap field adalah <code class="bg-gray-100 p-1 rounded-md text-sm">projectFieldId</code>.</p>
                        </div>
                    </div>

                    <!-- Admin -->
                    <div>
                        <h3 class="text-xl font-semibold mb-6">Admin</h3>
                        <div id="admin-projects-create" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-post font-bold text-sm px-2.5 py-1 rounded-md">POST</span>
                                <code class="text-md font-semibold text-gray-800">/admin/projects</code>
                            </div>
                            <p class="text-gray-600">Membuat proyek baru. Memerlukan otorisasi <code class="bg-gray-100 p-1 rounded-md text-sm">ADMIN</code>.</p>
                        </div>
                         <div id="admin-users-approve" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-md">PUT</span>
                                <code class="text-md font-semibold text-gray-800">/admin/users/{id}/approve</code>
                            </div>
                            <p class="text-gray-600">Menyetujui registrasi user. Memerlukan otorisasi <code class="bg-gray-100 p-1 rounded-md text-sm">ADMIN</code>.</p>
                        </div>
                        <div id="admin-submissions-approve" class="space-y-2 mb-8 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-md">PUT</span>
                                <code class="text-md font-semibold text-gray-800">/admin/submissions/{id}/approve</code>
                            </div>
                            <p class="text-gray-600">Menyetujui submission pekerjaan. Memerlukan otorisasi <code class="bg-gray-100 p-1 rounded-md text-sm">ADMIN</code>.</p>
                        </div>
                        <div id="admin-submissions-reject" class="space-y-2 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-md">PUT</span>
                                <code class="text-md font-semibold text-gray-800">/admin/submissions/{id}/reject</code>
                            </div>
                            <p class="text-gray-600">Menolak submission pekerjaan. Memerlukan otorisasi <code class="bg-gray-100 p-1 rounded-md text-sm">ADMIN</code>.</p>
                             <h4 class="font-semibold pt-2">Request Body:</h4>
                            <pre class="bg-gray-800 text-white p-4 rounded-lg text-sm"><code>{
    "catatanAdmin": "Screenshot tidak jelas, mohon unggah ulang."
}</code></pre>
                        </div>
                    </div>

                    <!-- Super Admin -->
                    <div>
                        <h3 class="text-xl font-semibold mb-6">Super Admin</h3>
                        <div id="superadmin-withdrawals-approve" class="space-y-2 p-6 bg-white rounded-xl border border-gray-200">
                            <div class="flex items-center gap-3">
                                <span class="method-put font-bold text-sm px-2.5 py-1 rounded-md">PUT</span>
                                <code class="text-md font-semibold text-gray-800">/superadmin/withdrawals/{id}/approve</code>
                            </div>
                            <p class="text-gray-600">Menyetujui permintaan penarikan dana (withdrawal). Memerlukan otorisasi <code class="bg-gray-100 p-1 rounded-md text-sm">SUPER_ADMIN</code>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.getElementById('download-btn').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = 'Mempersiapkan PDF...';

            // Sembunyikan tombol itu sendiri dari hasil PDF
            btn.style.visibility = 'hidden';

            const content = document.getElementById('api-content');
            
            html2canvas(content, {
                scale: 2, // Meningkatkan resolusi
                useCORS: true,
                onclone: (document) => {
                    // Pastikan background tetap terlihat di canvas
                    document.body.style.background = 'white';
                }
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                
                const pdf = new jsPDF({
                    orientation: 'p',
                    unit: 'px',
                    format: [canvas.width, canvas.height]
                });

                pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
                pdf.save('thebaxlancer_api_docs.pdf');

                // Kembalikan tombol seperti semula
                btn.style.visibility = 'visible';
                btn.disabled = false;
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error("Gagal membuat PDF:", err);
                alert("Gagal membuat PDF. Silakan coba lagi.");
                btn.style.visibility = 'visible';
                btn.disabled = false;
                btn.innerHTML = originalText;
            });
        });
    </script>

</body>
</html>
